From 70aacc51c043322f82208aec88ea2f3994413aba Mon Sep 17 00:00:00 2001
From: Piotr Gorski <lucjan.lucjanov@gmail.com>
Date: Sun, 27 Feb 2022 14:21:57 +0100
Subject: [PATCH] Adds gl revert, a wrapper for git revert

Signed-off-by: Piotr Gorski <lucjan.lucjanov@gmail.com>
---
 gitless/cli/gl.py          |  4 ++--
 gitless/cli/gl_revert.py | 28 ++++++++++++++++++++++++++++
 2 files changed, 30 insertions(+), 2 deletions(-)
 create mode 100644 gitless/cli/gl_revert.py

diff --git a/gitless/cli/gl.py b/gitless/cli/gl.py
index 30c2204..301fbcf 100644
--- a/gitless/cli/gl.py
+++ b/gitless/cli/gl.py
@@ -17,7 +17,7 @@ from .. import core, __version__
 from . import (
     gl_track, gl_untrack, gl_status, gl_diff, gl_commit, gl_branch, gl_tag,
     gl_checkout, gl_merge, gl_resolve, gl_fuse, gl_remote, gl_publish,
-    gl_switch, gl_init, gl_history, gl_ignore, gl_fetch, gl_pull, gl_patch)
+    gl_switch, gl_init, gl_history, gl_ignore, gl_fetch, gl_pull, gl_patch, gl_revert)
 from . import pprint
 from . import helpers
 
@@ -91,7 +91,7 @@ def main():
     sub_cmds = [
         gl_track, gl_untrack, gl_status, gl_diff, gl_commit, gl_branch, gl_tag,
         gl_checkout, gl_merge, gl_resolve, gl_fuse, gl_remote, gl_publish,
-        gl_switch, gl_init, gl_history, gl_ignore, gl_fetch, gl_pull, gl_patch]
+        gl_switch, gl_init, gl_history, gl_ignore, gl_fetch, gl_pull, gl_patch, gl_revert]
 
     parser = build_parser(sub_cmds, repo)
     argcomplete.autocomplete(parser)
diff --git a/gitless/cli/gl_revert.py b/gitless/cli/gl_revert.py
new file mode 100644
index 0000000..82e4026
--- /dev/null
+++ b/gitless/cli/gl_revert.py
@@ -0,0 +1,28 @@
+# -*- coding: utf-8 -*-
+# Gitless - a version control system built on top of Git
+# Licensed under MIT
+
+"""gl revert - A wrapper around git-revert1)."""
+
+
+from ..import core
+from . import pprint
+
+def parser(subparsers, _):
+    """Adds the revert parser to the given subparsers object."""
+    desc = 'Revert some existing commits.\n' \
+           'For more information on this advanced command refer to the manual page for git-revert.'
+    revert_parser = subparsers.add_parser(
+        'revert', help=desc, description=desc.capitalize(), aliases=['re'])
+    revert_parser.set_defaults(func=main)
+    revert_parser.add_argument(
+        'revert_args', nargs="*", help='Additional arguments to pass to `git revert`')
+
+
+def main(args, repo):
+    p = core.git_wrap('revert', *args.revert_args)
+    if p.returncode == 0:
+        pprint.ok('Reverting commit sucessful')
+    else:
+        pprint.err('Reverting commit failed')
+    return p.returncode == 0
-- 
2.35.1.273.ge6ebfd0e8c

