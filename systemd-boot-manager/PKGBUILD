# Maintainer: Piotr Gorski <lucjan.lucjanov@gmail.com>

pkgname=systemd-boot-manager
pkgver=7
pkgrel=1
pkgdesc='A simple tool to maintain systemd-boot & systemd-boot entries for CachyOS'
arch=('any')
url="https://github.com/CachyOS/CachyOS-PKGBUILDS/tree/master/$pkgname"
license=('GPL2')
backup=('etc/sdboot-manage.conf')
depends=('systemd' 'findutils' 'grep' 'gawk')

source=('sdboot-manage'
        'sdboot-manage.conf'
        'sdboot-kernel-install.hook'
        'sdboot-kernel-remove.hook'
        'sdboot-systemd-update.hook')

sha512sums=('03d05296db3ae910f3b58ad5c7dc1a0336def4211415333561920724b903d0ef0e71a2e4874987baad54701cea908661c5e62ce984d4eaeb967d966d081b0d85'
            '0630fa7de282b91eb144c6b010184adb85bd4640a81d9afc651292ec0b19920e2d54e0dc3fb69d1936d7c4090800f7947ec4a7611ea859a83528b4108fabfdc8'
            '31249d7c715a8aaf1d3cb9f44ca35122e38dfb6afe23a261c069ac6c05b9eb182472282cd2e153aa8f9f5667e425bdc6df3a8e26076b23486bc2c74ce106e3ad'
            '23d7efadbe9904b6b5f679fad37d2150ef7009735f5bf53e6caafb43cdaf85e78fa0c607a263522f2a10972b9982c421d09b2c253bd504d79aeb51c1a16bea23'
            'ebd0c79def6f2d77b9eac63ca41460db5670220dd9ba033bd0c24017abc7f71da2250907f76cac0cc9cf10e219ef518b916aa547fafbba4715be4985cc278c50')

package() {
  install -D -m755 "sdboot-manage" "${pkgdir}/usr/bin/sdboot-manage"
  install -D -m644 "sdboot-manage.conf" "${pkgdir}/etc/sdboot-manage.conf"
  install -D -m644 "sdboot-kernel-install.hook" "${pkgdir}/usr/share/libalpm/hooks/sdboot-kernel-install.hook"
  install -D -m644 "sdboot-kernel-remove.hook" "${pkgdir}/usr/share/libalpm/hooks/sdboot-kernel-remove.hook"
  install -D -m644 "sdboot-systemd-update.hook" "${pkgdir}/usr/share/libalpm/hooks/sdboot-systemd-update.hook"
}
