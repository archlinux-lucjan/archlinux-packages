# Maintainer: Peter Jung <admin@ptr1337.dev>
# Maintainer: Piotr GÃ³rski <lucjan.lucjanov@gmail.com>

pkgname=cachyos-deckify-git
gitname=CachyOS-Deckify
pkgver=20240430.r63.gaf5a864
pkgrel=1
groups=('cachyos')
arch=('any')
license=('GPL')
pkgdesc='CachyOS - Deckify'
source=("git+https://github.com/CachyOS/$gitname")
install="$pkgname.install"
options=(!strip !debug)
sha256sums=('SKIP')
depends=('gamescope-session-git' 'mangohud' 'cachyos-gaming-meta' 'jq' 'dmidecode' 'glew' 'glfw' 'glxinfo' 'curl' 'tar'
         'scx-scheds' 'qt5-tools' 'hhd' 'hhd-ui' 'adjustor' 'gamescope-session-steam-git')
makedepends=('git')

pkgver() {
  cd $gitname
  echo "$(git show --format='%cI' -q main | sed 's/T.*//g;s/-//g').r$(git rev-list --count HEAD).g$(git rev-parse --short HEAD)"
}

package() {
  install -d "$pkgdir/etc"
  cp -rf "${srcdir}/${gitname}/etc" "$pkgdir"
  install -d "$pkgdir/usr"
  cp -rf "${srcdir}/${gitname}/usr" "$pkgdir"
}
